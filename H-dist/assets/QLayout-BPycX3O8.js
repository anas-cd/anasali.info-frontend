import{v as T,x as C,c as u,h,B as M,i as W,G as _,A as B,H as N,g as Q,r as b,I as A,w as p,y as I,J as K,o as j,K as U,L as D,M as P,a as G}from"./index-BmzXl238.js";import{c as V,g as J,d as k,e as X,f as F}from"./scrollToElement-CTeb5B5e.js";const oe=T({name:"QPageContainer",setup(e,{slots:m}){const{proxy:{$q:i}}=Q(),n=W(B,C);if(n===C)return console.error("QPageContainer needs to be child of QLayout"),C;_(N,!0);const o=u(()=>{const a={};return n.header.space===!0&&(a.paddingTop=`${n.header.size}px`),n.right.space===!0&&(a[`padding${i.lang.rtl===!0?"Left":"Right"}`]=`${n.right.size}px`),n.footer.space===!0&&(a.paddingBottom=`${n.footer.size}px`),n.left.space===!0&&(a[`padding${i.lang.rtl===!0?"Right":"Left"}`]=`${n.left.size}px`),a});return()=>h("div",{class:"q-page-container",style:o.value},M(m.default))}}),ne=T({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:m}){const i=u(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>h("div",{class:i.value,role:"toolbar"},M(m.default))}}),le=T({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:m,emit:i}){const{proxy:{$q:n}}=Q(),o=W(B,C);if(o===C)return console.error("QFooter needs to be child of QLayout"),C;const a=b(parseInt(e.heightHint,10)),c=b(!0),w=b(A.value===!0||o.isContainer.value===!0?0:window.innerHeight),f=u(()=>e.reveal===!0||o.view.value.indexOf("F")!==-1||n.platform.is.ios&&o.isContainer.value===!0),s=u(()=>o.isContainer.value===!0?o.containerHeight.value:w.value),z=u(()=>{if(e.modelValue!==!0)return 0;if(f.value===!0)return c.value===!0?a.value:0;const t=o.scroll.value.position+s.value+a.value-o.height.value;return t>0?t:0}),y=u(()=>e.modelValue!==!0||f.value===!0&&c.value!==!0),S=u(()=>e.modelValue===!0&&y.value===!0&&e.reveal===!0),d=u(()=>"q-footer q-layout__section--marginal "+(f.value===!0?"fixed":"absolute")+"-bottom"+(e.bordered===!0?" q-footer--bordered":"")+(y.value===!0?" q-footer--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus"+(f.value!==!0?" hidden":""):"")),$=u(()=>{const t=o.rows.value.bottom,r={};return t[0]==="l"&&o.left.space===!0&&(r[n.lang.rtl===!0?"right":"left"]=`${o.left.size}px`),t[2]==="r"&&o.right.space===!0&&(r[n.lang.rtl===!0?"left":"right"]=`${o.right.size}px`),r});function g(t,r){o.update("footer",t,r)}function x(t,r){t.value!==r&&(t.value=r)}function L({height:t}){x(a,t),g("size",t)}function q(){if(e.reveal!==!0)return;const{direction:t,position:r,inflectionPoint:v}=o.scroll.value;x(c,t==="up"||r-v<100||o.height.value-s.value-r-a.value<300)}function H(t){S.value===!0&&x(c,!0),i("focusin",t)}p(()=>e.modelValue,t=>{g("space",t),x(c,!0),o.animate()}),p(z,t=>{g("offset",t)}),p(()=>e.reveal,t=>{t===!1&&x(c,e.modelValue)}),p(c,t=>{o.animate(),i("reveal",t)}),p([a,o.scroll,o.height],q),p(()=>n.screen.height,t=>{o.isContainer.value!==!0&&x(w,t)});const l={};return o.instances.footer=l,e.modelValue===!0&&g("size",a.value),g("space",e.modelValue),g("offset",z.value),I(()=>{o.instances.footer===l&&(o.instances.footer=void 0,g("size",0),g("offset",0),g("space",!1))}),()=>{const t=K(m.default,[h(V,{debounce:0,onResize:L})]);return e.elevated===!0&&t.push(h("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),h("footer",{class:d.value,style:$.value,onFocusin:H},t)}}}),{passive:E}=D,Y=["both","horizontal","vertical"],Z=T({name:"QScrollObserver",props:{axis:{type:String,validator:e=>Y.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:{default:void 0}},emits:["scroll"],setup(e,{emit:m}){const i={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let n=null,o,a;p(()=>e.scrollTarget,()=>{f(),w()});function c(){n!==null&&n();const y=Math.max(0,k(o)),S=X(o),d={top:y-i.position.top,left:S-i.position.left};if(e.axis==="vertical"&&d.top===0||e.axis==="horizontal"&&d.left===0)return;const $=Math.abs(d.top)>=Math.abs(d.left)?d.top<0?"up":"down":d.left<0?"left":"right";i.position={top:y,left:S},i.directionChanged=i.direction!==$,i.delta=d,i.directionChanged===!0&&(i.direction=$,i.inflectionPoint=i.position),m("scroll",{...i})}function w(){o=J(a,e.scrollTarget),o.addEventListener("scroll",s,E),s(!0)}function f(){o!==void 0&&(o.removeEventListener("scroll",s,E),o=void 0)}function s(y){if(y===!0||e.debounce===0||e.debounce==="0")c();else if(n===null){const[S,d]=e.debounce?[setTimeout(c,e.debounce),clearTimeout]:[requestAnimationFrame(c),cancelAnimationFrame];n=()=>{d(S),n=null}}}const{proxy:z}=Q();return p(()=>z.$q.lang.rtl,c),j(()=>{a=z.$el.parentNode,w()}),I(()=>{n!==null&&n(),f()}),Object.assign(z,{trigger:s,getPosition:()=>i}),U}}),ie=T({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:m,emit:i}){const{proxy:{$q:n}}=Q(),o=b(null),a=b(n.screen.height),c=b(e.container===!0?0:n.screen.width),w=b({position:0,direction:"down",inflectionPoint:0}),f=b(0),s=b(A.value===!0?0:F()),z=u(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),y=u(()=>e.container===!1?{minHeight:n.screen.height+"px"}:null),S=u(()=>s.value!==0?{[n.lang.rtl===!0?"left":"right"]:`${s.value}px`}:null),d=u(()=>s.value!==0?{[n.lang.rtl===!0?"right":"left"]:0,[n.lang.rtl===!0?"left":"right"]:`-${s.value}px`,width:`calc(100% + ${s.value}px)`}:null);function $(l){if(e.container===!0||document.qScrollPrevented!==!0){const t={position:l.position.top,direction:l.direction,directionChanged:l.directionChanged,inflectionPoint:l.inflectionPoint.top,delta:l.delta.top};w.value=t,e.onScroll!==void 0&&i("scroll",t)}}function g(l){const{height:t,width:r}=l;let v=!1;a.value!==t&&(v=!0,a.value=t,e.onScrollHeight!==void 0&&i("scrollHeight",t),L()),c.value!==r&&(v=!0,c.value=r),v===!0&&e.onResize!==void 0&&i("resize",l)}function x({height:l}){f.value!==l&&(f.value=l,L())}function L(){if(e.container===!0){const l=a.value>f.value?F():0;s.value!==l&&(s.value=l)}}let q=null;const H={instances:{},view:u(()=>e.view),isContainer:u(()=>e.container),rootRef:o,height:a,containerHeight:f,scrollbarWidth:s,totalWidth:u(()=>c.value+s.value),rows:u(()=>{const l=e.view.toLowerCase().split(" ");return{top:l[0].split(""),middle:l[1].split(""),bottom:l[2].split("")}}),header:P({size:0,offset:0,space:!1}),right:P({size:300,offset:0,space:!1}),footer:P({size:0,offset:0,space:!1}),left:P({size:300,offset:0,space:!1}),scroll:w,animate(){q!==null?clearTimeout(q):document.body.classList.add("q-body--layout-animate"),q=setTimeout(()=>{q=null,document.body.classList.remove("q-body--layout-animate")},155)},update(l,t,r){H[l][t]=r}};if(_(B,H),F()>0){let l=function(){v=null,R.classList.remove("hide-scrollbar")},t=function(){if(v===null){if(R.scrollHeight>n.screen.height)return;R.classList.add("hide-scrollbar")}else clearTimeout(v);v=setTimeout(l,300)},r=function(O){v!==null&&O==="remove"&&(clearTimeout(v),l()),window[`${O}EventListener`]("resize",t)},v=null;const R=document.body;p(()=>e.container!==!0?"add":"remove",r),e.container!==!0&&r("add"),G(()=>{r("remove")})}return()=>{const l=K(m.default,[h(Z,{onScroll:$}),h(V,{onResize:g})]),t=h("div",{class:z.value,style:y.value,ref:e.container===!0?void 0:o,tabindex:-1},l);return e.container===!0?h("div",{class:"q-layout-container overflow-hidden",ref:o},[h(V,{onResize:x}),h("div",{class:"absolute-full",style:S.value},[h("div",{class:"scroll",style:d.value},[t])])]):t}}});export{ie as Q,oe as a,ne as b,le as c};
